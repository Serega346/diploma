import React from 'react'
import {connect} from 'react-redux'
import {withRouter} from 'react-router'
import {compose} from 'redux'
import {Link} from 'react-router-dom'
import './categories.css'

import {getCategories} from 'selectors'

const ResponsiveCategories = ({categories}) => {

  const closeNav = () => {

    if (document.getElementById("myNav")) {

      document.getElementById("myNav").style.width = "0"

    }

  }

  const renderCategory = (category, index) => {

    return (

      <Link
        to={`/categories/${category.id}`}
        key={index}
        onClick={closeNav}
      >
        {category.name}
      </Link>
    )
  }

  return (
    <div id="myNav" className="overlay">
      <a className="closebtn" onClick={closeNav}>&times;</a>
      <div className="overlay-content">
        {categories.map((category, index) => renderCategory(category, index))}
      </div>
    </div>
  )
}

const mapStateToProps = (state) => ({
  categories: getCategories(state)
})

export default compose(
  withRouter,
  connect(mapStateToProps, null)
)(ResponsiveCategories)
